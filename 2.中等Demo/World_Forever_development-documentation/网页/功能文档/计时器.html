
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="color-scheme" content="dark">
<title>计时器</title>
</head>
<body>
	<h1>计时器</h1>
    <h2>全局计时器</h2>
	<p>功能：全局游戏时间并将其输出到屏幕上</p>
	<p>首先创建UI，将对局时间定义为变量。我们设计</p>
	<img src="计时器/1.png">
	<p>所以需要全局计时器有两个输出：分钟、秒钟。</p>
	<p>实际上，时间并不需要设计为“是变量”，因为这个东西可以直接绑定（在文本的右面）。</p>
	<p>我们选择创建绑定，此时输出的值是文本类型的返回值。</p>
	<p>为了能在外面对UI的相关内容进行修改，需要在UI中手动创建变量，将变量设置为“可编辑实例”和“生成时公开”。</p>
	<p>这样CreateWidget节点就会变</p>
	<img src="计时器/2.png">
	<img src="计时器/3.png">
	<p>现在我们创建了两个变量：分钟时间和秒钟时间。</p>
	<p>数据传输机制是：外面的数据--》CreateWidget参数--》数据显示绑定</p>
	<p>接下来我们要把创建的变量，将它们的值格式化成时间格式</p>
	<p>字符串拼接：Append节点</p>
	<p>确保显示的某个int数值至少两位，不足两位，则在前补0：ToText节点。需要将节点展开。</p>
	<img src="计时器/4.png">
	<p>注意：FormatText节点的Format参数是：{Minute}：{Sec}。关注花括号。这是用于格式化文本的。</p>
	<p>为了防止CreateWidget时重复创建导致重影，同时为了防止CreateWidget后不能刷新，需要</p>
	<p>以事件设置定时器</p>
	<img src="计时器/5.png">
	<p>每隔1s触发一次，Looping=TRUE则可重复触发/p>
	<p>每次触发执行的事件，就是Event事件。这里创建自定义事件</p>
	<img src="计时器/6.png">
	<p>上述节点族在UI事件图表中实现</p>
	<p>因为要统计的是游戏时间，所以在关卡蓝图中</p>
	<img src="计时器/7.png">
	<img src="计时器/8.png">
	<h2>计时器</h2>
	<p>对于全局计时器同理。我们创建一个Actor类蓝图，创建三个变量，对这三个变量进行设置。</p>
	<img src="计时器/9.png">
	<p>注意，这个方法如果要提升精度，需要修改SetTimerByEvent的Time参数</p>
	<p>计时器验证</p>
	<img src="计时器/10.png">
	<p>使用计时器时需要注意，应当定时Destroy Actor。</p>
	<h2>定时器</h2>
	<p>定时器需要我们传递进去定时时间。设计定时时间格式为：分钟、秒钟</p>
	<p>创建三个int型变量，定义可编辑实例和生成时公开。这样当SpawnActor时就可以传递定时时间。</p>
	<p>创建一个bool型变量表示是否计时结束。该变量默认值为false，且不需要可编辑实例和生成时公开。</p>
	<img src="计时器/11.png">
	<p>定时器验证</p>
	<img src="计时器/12.png">
	<p>同时需要在构造函数中进行初始化</p>
	<img src="计时器/13.png">
	<p>生成定时器后，记得销毁</p>
	<p></p>
</body>
</html>